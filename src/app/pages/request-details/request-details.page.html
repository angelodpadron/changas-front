<ion-header translucent>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title class="page-title">Detalles de Solicitud</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen>
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large" class="page-title">Detalles de Solicitud</ion-title>
    </ion-toolbar>
  </ion-header>

  @if(loaded){

    <ion-card>
      <ion-img [src]="hiringDetails.changa_photo_url"></ion-img>
      <ion-card-header>
        <ion-card-title>{{ hiringDetails.changa_title }}</ion-card-title>
        <ion-card-subtitle class="card-subtitle">{{ hiringDetails.creation_date | date }}</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <p>{{ hiringDetails.changa_description }}</p>
        <hr />
        <app-transaction-status [status]="hiringDetails.status"></app-transaction-status>
      </ion-card-content>

      <ion-card-header>
        <ion-card-title>
          {{ isProvider ? 'Solicitante de esta changa' : 'Proveedor de esta changa' }}
        </ion-card-title>
      </ion-card-header>
      <app-customer-overview
        [customerName]="customerDetails.name"
        [customerEmail]="customerDetails.email"
        [customerPhotoUrl]="customerDetails.photoUrl!"
      ></app-customer-overview>

      <ion-card-header>
        <ion-card-title>Detalles del √Årea a Trabajar</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-img [src]="hiringDetails.work_area_photo_url"></ion-img>
        <hr />
        <p>{{ hiringDetails.work_details }}</p>
        <hr />
        <div *ngIf="canRespondToRequest()" class="button-container">
          <ion-button shape="round" expand="block" color="success" (click)="acceptRequest()">Aceptar Solicitud</ion-button>
          <ion-button shape="round" expand="block" color="danger" (click)="declineRequest()">Rechazar Solicitud</ion-button>
        </div>
      </ion-card-content>
    </ion-card>
  } @else {
    <div class="spinner-container">
      <ion-spinner></ion-spinner>
    </div>
  }
</ion-content>
