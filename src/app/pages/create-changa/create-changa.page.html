<ion-header [translucent]="true" class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title>Crear una changa</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Crear una changa</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-card>
    <img
      [src]="form.get('photo_url')?.value ||
    'https://ionicframework.com/docs/img/demos/card-media.png'"
      alt="Changa Image"
    />
    <ion-card-content>
      <form [formGroup]="form" (ngSubmit)="createChanga()">
        <ion-input
          formControlName="title"
          type="text"
          label="Titulo de la changa"
          placeholder="Corte de pasto"
          labelPlacement="floating"
          fill="outline"
          [counter]="true"
          maxlength="50"
          helpText="Escribe un titulo para la changa. Maximo 50 caracteres."
          errorText="Nombre invalido. No utilices simbolos, y asegurate de usar al menos 3 caracteres."
        ></ion-input>
        <ion-input
          formControlName="photo_url"
          type="url"
          label="URL que contenga la imagen de la changa"
          placeholder="https://www.example.com/image.jpg"
          labelPlacement="floating"
          fill="outline"
          helpText="URL de la imagen de la changa. Puede ser una URL de una imagen en internet."
          errorText="URL invalida. Asegurate de que sea una URL valida."
        ></ion-input>

        <ion-textarea
          formControlName="description"
          label="Descripcion de la changa"
          labelPlacement="floating"
          placeholder="Servicio de corte de pasto zona norte"
          fill="outline"
          [autoGrow]="true"
          [counter]="true"
          maxlength="200"
          rows="5"
          helpText="Escribe una descripcion de la changa. Maximo 200 caracteres."
          errorText="Descripcion invalida. Asegurate de usar al menos 10 caracteres."
        ></ion-textarea>
        <app-add-location (onLocationAdded)="handleLocationAdded($event)"></app-add-location>
        <ion-input
          formControlName="topics"
          type="text"
          label="Temas de la changa"
          labelPlacement="floating"
          fill="outline"
          helpText="Escribe los temas de la changa separados por coma."
        ></ion-input>
        <br />
        <ion-button
          type="submit"
          expand="block"
          shape="round"
          color="warning"
          [disabled]="!form.valid"
          >Publicar</ion-button
        >
      </form>
    </ion-card-content>
  </ion-card>
</ion-content>
